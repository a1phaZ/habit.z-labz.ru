{"version":3,"sources":["state/index.js","state/actions.js","components/HabitList.js","panels/Home.js","hooks/useLocalStorage.js","panels/Startup.js","panels/Preloader.js","App.js","index.js"],"names":["initialState","view","panel","activeModal","reducer","state","action","type","payload","modal","State","createContext","StateProvider","children","value","useReducer","Provider","HabitList","habits","map","habit","console","log","size","style","height","Home","id","useContext","dispatch","vertical","onClick","before","key","initialValue","useState","localStorage","getItem","setValue","setLocalStorageValue","setItem","templates","icon","header","buttonText","placeholderText","placeholder","Startup","useLocalStorage","setDone","dispatchStartup","mode","Preloader","doneStartup","useEffect","done","JSON","parse","osName","platform","App","appState","dispatchApp","fetchedUser","setUser","popout","setPopout","title","setTitle","days","setDays","a","bridge","send","user","subscribe","detail","data","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","fetchData","modalBack","onClose","left","IOS","right","onSubmit","e","preventDefault","lastModified","Date","required","onChange","currentTarget","top","min","max","step","d","activeView","activePanel","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.40d735e5.chunk.js","sourcesContent":["import {SET_VIEW, SET_PANEL, SET_MODAL} from \"./actions\";\r\nimport React, {createContext, useReducer} from 'react';\r\n\r\nconst initialState = {\r\n\tview: 'preloader',\r\n\tpanel: 'preloader',\r\n\tactiveModal: null\r\n}\r\n\r\nconst reducer = (state, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_VIEW:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tview: action.payload.view,\r\n\t\t\t\tpanel: action.payload.panel\r\n\t\t\t}\r\n\t\tcase SET_PANEL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tpanel: action.payload.panel\r\n\t\t\t}\r\n\t\tcase SET_MODAL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tactiveModal: action.payload.modal\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}\r\n\r\nexport const State = createContext();\r\n\r\nexport const StateProvider = ({children}) => {\r\n\tconst value = useReducer(reducer, initialState);\r\n\treturn (\r\n\t\t<State.Provider value={value}>\r\n\t\t\t{children}\r\n\t\t</State.Provider>\r\n\t)\r\n}","export const SET_VIEW = 'SET_VIEW';\r\nexport const SET_PANEL = 'SET_PANEL';\r\nexport const SET_MODAL = 'SET_MODAL';","import React from 'react';\r\nimport {Card} from \"@vkontakte/vkui\";\r\n\r\nconst HabitList = ({ habits }) => {\r\n\treturn habits.map(habit => {\r\n\t\tconsole.log(habit);\r\n\t\treturn (\r\n\t\t\t<Card size={'l'}>\r\n\t\t\t\t<div style={{ height: 96 }} />\r\n\t\t\t</Card>\r\n\t\t)\r\n\t})\r\n}\r\n\r\nexport default HabitList;\r\n","import React, {useContext} from 'react';\nimport PropTypes from 'prop-types';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport {CardGrid, CellButton, FixedLayout, FormLayout} from \"@vkontakte/vkui\";\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\nimport {State} from \"../state\";\nimport {SET_MODAL} from \"../state/actions\";\nimport HabitList from \"../components/HabitList\";\n\nconst Home = ({ id, habits }) => {\n\tconst [, dispatch] = useContext(State);\n\treturn (\n\t\t<Panel id={id}>\n\t\t\t<PanelHeader>Example</PanelHeader>\n\t\t\t<CardGrid>\n\t\t\t\t<HabitList habits={habits} />\n\t\t\t</CardGrid>\n\t\t\t<FixedLayout\n\t\t\t\tvertical={'bottom'}\n\t\t\t>\n\t\t\t\t<FormLayout>\n\t\t\t\t\t<CellButton\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tdispatch({type: SET_MODAL, payload: {modal: 'add-habit'}})\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tbefore={<Icon24Add/>}\n\t\t\t\t\t>\n\t\t\t\t\t\tСоздать цель\n\t\t\t\t\t</CellButton>\n\t\t\t\t</FormLayout>\n\t\t\t</FixedLayout>\n\t\t</Panel>\n\t)\n};\n\nHome.propTypes = {\n\tid: PropTypes.string.isRequired,\n};\n\nexport default Home;\n","import { useState } from 'react';\r\n\r\nexport default (key, initialValue = '') => {\r\n\tconst [value, setValue] = useState(() => {\r\n\t\treturn localStorage.getItem(key) || initialValue;\r\n\t});\r\n\r\n\tconst setLocalStorageValue = (value) => {\r\n\t\tsetValue(value);\r\n\t\tlocalStorage.setItem(key, value)\r\n\t}\r\n\r\n\treturn [value, setLocalStorageValue];\r\n}","import React, {useContext, useReducer} from 'react';\r\nimport {Button, Div, Panel, PanelHeader, Placeholder} from \"@vkontakte/vkui\";\r\nimport Icon56EventOutline from '@vkontakte/icons/dist/56/event_outline';\r\nimport {State} from \"../state\";\r\nimport {SET_VIEW} from \"../state/actions\";\r\nimport useLocalStorage from \"../hooks/useLocalStorage\";\r\n\r\nconst templates = [\r\n\t{\r\n\t\tid: 1,\r\n\t\ticon: (<Icon56EventOutline/>),\r\n\t\theader: 'Формирование привычки',\r\n\t\tbuttonText: 'Далее',\r\n\t\tplaceholderText: 'В психологии давно установлен факт, что 21 дня достаточно, чтобы привить новые привычки (избавиться от старых) и таким образом улучшить качество жизни',\r\n\t},\r\n\t{\r\n\t\tid: 2,\r\n\t\ticon: (<Icon56EventOutline/>),\r\n\t\theader: 'Поставьте цель и идите к ней',\r\n\t\tbuttonText: 'Далее',\r\n\t\tplaceholderText: 'Создайте в приложении цель (привычку, которую хотите изменить) и отмечайте ее успешное ежедневное выполнение',\r\n\t},\r\n\t{\r\n\t\tid: 3,\r\n\t\ticon: (<Icon56EventOutline/>),\r\n\t\theader: 'В формировании привычки важна регулярность',\r\n\t\tbuttonText: 'Начать',\r\n\t\tplaceholderText: 'В случае пропуска ежедневной отметки прогресс сбрасывается, но вы можете запустить счетчик сначала',\r\n\t},\r\n]\r\n\r\nconst initialState = {\r\n\tplaceholder: {\r\n\t\tid: 1,\r\n\t\ticon: (<Icon56EventOutline/>),\r\n\t\theader: 'Формирование привычки',\r\n\t\tbuttonText: 'Далее',\r\n\t\tplaceholderText: 'В психологии давно установлен факт, что 21 дня достаточно, чтобы привить новые привычки (избавиться от старых) и таким образом улучшить качество жизни',\r\n\r\n\t}\r\n}\r\nconst reducer = (state, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase 'SET_PLACEHOLDER':\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tplaceholder: action.payload.placeholder\r\n\t\t\t}\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\nconst Startup = ({id}) => {\r\n\tconst [, setDone] = useLocalStorage('startup-done');\r\n\tconst [{placeholder}, dispatchStartup] = useReducer(reducer, initialState);\r\n\tconst [, dispatch] = useContext(State);\r\n\treturn (\r\n\t\t<Panel id={id}>\r\n\t\t\t<PanelHeader>Введение</PanelHeader>\r\n\t\t\t<Placeholder\r\n\t\t\t\ticon={placeholder.icon}\r\n\t\t\t\theader={placeholder.header}\r\n\t\t\t\taction={\r\n\t\t\t\t\t[<Div key={'action'}>\r\n\t\t\t\t\t\t<Button onClick={\r\n\t\t\t\t\t\t\t() => {\r\n\t\t\t\t\t\t\t\tif (placeholder.id < 3) {\r\n\t\t\t\t\t\t\t\t\tdispatchStartup({\r\n\t\t\t\t\t\t\t\t\t\ttype: 'SET_PLACEHOLDER', payload: {\r\n\t\t\t\t\t\t\t\t\t\t\tplaceholder: templates[placeholder.id],\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tdispatch({type: SET_VIEW, payload: {view: 'home', panel: 'home'}});\r\n\t\t\t\t\t\t\t\t\tsetDone('true');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{placeholder.buttonText}\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t</Div>,\r\n\t\t\t\t\t<Div key={'skip'}>\r\n\t\t\t\t\t\t{placeholder.id !== 3 && <Button\r\n\t\t\t\t\t\t\tmode={'tertiary'}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tdispatch({type: SET_VIEW, payload: {view: 'home', panel: 'home'}});\r\n\t\t\t\t\t\t\t\tsetDone('true');\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tПропустить\r\n\t\t\t\t\t\t</Button>}\r\n\t\t\t\t\t</Div>\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t{placeholder.placeholderText}\r\n\t\t\t</Placeholder>\r\n\t\t</Panel>\r\n\t)\r\n}\r\n\r\nexport default Startup;\r\n","import React, {useEffect, useContext} from 'react';\r\nimport {Panel} from \"@vkontakte/vkui\";\r\nimport useLocalStorage from \"../hooks/useLocalStorage\";\r\nimport {State} from \"../state\";\r\nimport {SET_VIEW} from \"../state/actions\";\r\n\r\nconst Preloader = ({id}) => {\r\n\tconst [, dispatch] = useContext(State);\r\n\tconst [doneStartup] = useLocalStorage('startup-done');\r\n\tuseEffect(() => {\r\n\t\tif (!doneStartup) {\r\n\t\t\tdispatch({type: SET_VIEW, payload: {view: 'startup', panel: 'startup'}});\r\n\t\t} else {\r\n\t\t\tconst done = JSON.parse(doneStartup);\r\n\t\t\tif (done) {\r\n\t\t\t\tdispatch({type: SET_VIEW, payload: {view: 'home', panel: 'home'}});\r\n\t\t\t} else {\r\n\t\t\t\tdispatch({type: SET_VIEW, payload: {view: 'startup', panel: 'startup'}});\r\n\t\t\t}\r\n\t\t}\r\n\t}, [dispatch, doneStartup]);\r\n\treturn (\r\n\t\t<Panel id={id}>\r\n\t\t\t<div>Habit</div>\r\n\t\t</Panel>\r\n\t)\r\n}\r\n\r\nexport default Preloader;\r\n","import React, {useState, useEffect, useContext, useReducer} from 'react';\nimport bridge from '@vkontakte/vk-bridge';\nimport View from '@vkontakte/vkui/dist/components/View/View';\nimport '@vkontakte/vkui/dist/vkui.css';\n\nimport Home from './panels/Home';\nimport {State} from \"./state\";\nimport {\n\tIOS,\n\tModalPage,\n\tModalPageHeader,\n\tModalRoot,\n\tPanelHeaderButton,\n\tRoot,\n\tplatform,\n\tFormLayout, Input, Slider, CellButton\n} from \"@vkontakte/vkui\";\nimport Startup from \"./panels/Startup\";\nimport Preloader from \"./panels/Preloader\";\nimport {SET_MODAL} from \"./state/actions\";\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel';\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\n\nconst osName = platform();\nconst SET_HABITS = 'SET_HABITS';\n\nconst initialState = {\n\thabits: []\n}\n\nconst reducer = (state, action) => {\n\tswitch (action.type) {\n\t\tcase SET_HABITS:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\thabits: [...state.habits, action.payload.habit]\n\t\t\t}\n\t\tdefault:\n\t\t\treturn state;\n\t}\n}\n\nconst App = () => {\n\tconst [state, dispatch] = useContext(State);\n\tconst [appState, dispatchApp] = useReducer(reducer, initialState);\n\tconst [fetchedUser, setUser] = useState(null);\n\tconst [popout, setPopout] = useState(null);\n\tconst [title, setTitle] = useState('');\n\tconst [days, setDays] = useState(21);\n\n\tuseEffect(() => {\n\t\tbridge.subscribe(({detail: {type, data}}) => {\n\t\t\tif (type === 'VKWebAppUpdateConfig') {\n\t\t\t\tconst schemeAttribute = document.createAttribute('scheme');\n\t\t\t\tschemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n\t\t\t\tdocument.body.attributes.setNamedItem(schemeAttribute);\n\t\t\t}\n\t\t});\n\n\t\tasync function fetchData() {\n\t\t\tconst user = await bridge.send('VKWebAppGetUserInfo');\n\t\t\tsetUser(user);\n\t\t\tsetPopout(null);\n\t\t}\n\n\t\tfetchData();\n\t}, []);\n\n\tconst modalBack = () => {\n\t\tdispatch({type: SET_MODAL, payload: {modal: null}});\n\t}\n\n\tconst modal = (\n\t\t<ModalRoot\n\t\t\tactiveModal={state.activeModal}\n\t\t\tonClose={modalBack}\n\t\t>\n\t\t\t<ModalPage\n\t\t\t\tid={'add-habit'}\n\t\t\t\tonClose={modalBack}\n\t\t\t\theader={\n\t\t\t\t\t<ModalPageHeader\n\t\t\t\t\t\tleft={osName !== IOS && <PanelHeaderButton onClick={modalBack}><Icon24Cancel/></PanelHeaderButton>}\n\t\t\t\t\t\tright={osName === IOS &&\n\t\t\t\t\t\t<PanelHeaderButton onClick={modalBack}>{osName === IOS ? 'Готово' : <Icon24Dismiss/>}</PanelHeaderButton>}\n\t\t\t\t\t>\n\t\t\t\t\t\tСоздать цель\n\t\t\t\t\t</ModalPageHeader>\n\t\t\t\t}\n\t\t\t>\n\t\t\t\t<FormLayout\n\t\t\t\t\tonSubmit={(e) => {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\tdispatchApp({\n\t\t\t\t\t\t\ttype: SET_HABITS, payload: {\n\t\t\t\t\t\t\t\thabit: {\n\t\t\t\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\t\t\t\tdays: days,\n\t\t\t\t\t\t\t\t\tlastModified: new Date()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\tdispatch({type: SET_MODAL, payload: {modal: null}});\n\t\t\t\t\t\tsetDays(21);\n\t\t\t\t\t\tsetTitle('');\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Input\n\t\t\t\t\t\trequired\n\t\t\t\t\t\ttype={'text'}\n\t\t\t\t\t\tvalue={title}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetTitle(e.currentTarget.value)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\ttop={'Название цели'}\n\t\t\t\t\t/>\n\t\t\t\t\t<Slider min={1} max={21} step={1} value={days} top={`Кол-во дней: ${days}`} onChange={(d) => {\n\t\t\t\t\t\tsetDays(d)\n\t\t\t\t\t}}/>\n\t\t\t\t\t<CellButton\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t// dispatch({type: SET_MODAL, payload: {modal: 'add-habit'}})\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tbefore={<Icon24Add/>}\n\t\t\t\t\t>\n\t\t\t\t\t\tСоздать цель\n\t\t\t\t\t</CellButton>\n\t\t\t\t</FormLayout>\n\t\t\t</ModalPage>\n\t\t</ModalRoot>\n\t)\n\n\treturn (\n\t\t<Root activeView={state.view}>\n\t\t\t<View activePanel={state.panel} id={'preloader'}>\n\t\t\t\t<Preloader id={'preloader'}/>\n\t\t\t</View>\n\t\t\t<View activePanel={state.panel} id={'startup'}>\n\t\t\t\t<Startup id={'startup'}/>\n\t\t\t</View>\n\t\t\t<View activePanel={state.panel} popout={popout} id={'home'} modal={modal}>\n\t\t\t\t<Home id='home' fetchedUser={fetchedUser} habits={appState.habits}/>\n\t\t\t</View>\n\t\t</Root>\n\t);\n}\n\nexport default App;\n\n","import \"core-js/features/map\";\nimport \"core-js/features/set\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\nimport {StateProvider} from \"./state\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(\n  <StateProvider>\n    <App />\n  </StateProvider>,\n  document.getElementById(\"root\")\n);\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); //runtime download\n}\n"],"sourceRoot":""}